<!DOCTYPE html>

<head>
    <title>2024 BeastSaber Mapping Awards Submission Form</title>
    <!--<link rel="icon" type="image/x-icon" href="/cdn/favicon.png">!-->

    <style>
        @keyframes bg {
            0% {
                background-position: 0% 24%
            }

            50% {
                background-position: 100% 77%
            }

            100% {
                background-position: 0% 24%
            }
        }

        body {
            background-image: linear-gradient(120deg, #b52a1c -49%, #454088 27.08%, #454088 70%, #1268a1);
            background: linear-gradient(127deg, #f708d4, #4808f7, #a24aff, #8f18f7, #f708e9);
            background-size: 1000% 1000%;
            animation: bg 90s ease infinite;
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            margin: 4vh;
        }

        a.bio,
        a:visited.bio,
        a:active.bio {
            text-decoration: none;
            color: rgb(29, 172, 255);
        }

        a.bio:hover {
            text-decoration: underline;
        }

        div#info,
        div#form,
        div#countsContainer {
            margin: 10px;
            max-width: 600px;
            min-width: 250px;
            width: 80%;
            padding: 20px;
            border: 1px solid rgb(92, 4, 255);
            color: white;
            border-radius: 10px;
            background-color: black;
        }

        div#info {
            padding: 0px 20px 20px 20px;
            text-align: center;
        }

        #nominationForm {
            display: flex;
            flex-direction: column;
            margin: auto;
            max-width: 350px;
        }

        input[type="text"],
        select {
            margin-bottom: 10px;
            padding: 5px;
            border-radius: 5px;
            border: 1px solid black;
        }

        input[type="submit"] {
            padding: 5px;
            border-radius: 5px;
            border: 1px solid black;
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
            cursor: pointer;
        }

        input[type="submit"]:hover {
            background-color: #45a049;
        }

        h1 {
            margin-bottom: 0px;
        }

        h2,
        h3 {
            text-align: center;
            margin-top: 0px;
        }

        h4 {
            margin-top: 0px;
        }

        #username,
        a.username,
        a:visited.username,
        a:active.username,
        a:hover.username {
            text-align: center;
            color: white;
            text-decoration: none;
            font-size: 12px;
            margin-bottom: 0px;
        }

        div#countsContainer {
            padding: 0px 20px 20px 20px;
            text-align: center;
        }

        div#counts {
            display: inline-flex;
            flex-direction: row;
            flex-wrap: wrap;
            justify-content: center;
        }

        p.countLabel {
            margin: 0;
        }

        p.count {
            display: inline;
            font-size: 26px;
        }

        span {
            display: inline-block;
            margin: 10px;
            margin-bottom: 2px;
            padding: 10px;
            padding-bottom: 8px;
            border-radius: 8px;
            border: rgb(52, 52, 52) 1px solid;
        }

        footer {
            font-family: Arial, sans-serif;
            position: fixed;
            bottom: 0;
            width: 100%;
            text-align: center;
            color: rgba(255, 255, 255, 0.5);
            padding: 5px;
            text-decoration: none;
            font-size: 12px;
        }

        a.footer,
        a:visited.footer,
        a:active.footer,
        a:hover.footer {
            color: rgba(255, 255, 255, 0.5);
            text-decoration: none;
        }


        /* #region beatmaps */
        div.beatmaps-container {
            align-content: center;
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 0px;
            margin-left: 50px;
            margin-right: 50px;
        }

        div.beatmap {
            background-color: rgb(41, 41, 41);
            border-radius: 10px;
            width: 400px;
            display: flex;
            padding: 10px;
            margin-top: 15px;
            margin-left: 15px;
            margin-right: 15px;
            margin-bottom: 0px;
        }

        img.beatmaps.cover {
            border-radius: 10px;
            color: #000;
        }

        div.beatmaps.difficulties {
            display: flex;
            flex-wrap: wrap;
            margin-top: 5px;
        }

        div.beatmaps.difficulty {
            display: flex;
            align-items: center;
            width: 28px;
            height: 28px;
            border-radius: 15px;
            margin-top: 5px;
            margin-right: 5px;
        }

        div.beatmaps.image {
            /* flex: 1; */
            width: 100px;
            height: 100px;
            padding-right: 5px;
        }

        div.beatmaps.title {
            flex: 2;
            padding-left: 10px;
            font-family: "Lato", "-apple-system", "BlinkMacSystemFont", "Segoe UI", "Roboto", "Helvetica Neue", "Arial", "sans-serif", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-size: 16px;
        }

        a.beatmaps.title:link,
        a.beatmaps.title:visited {
            color: rgb(0, 207, 138);
            text-decoration: none;
        }

        a.beatmaps.title:hover,
        a.beatmaps.title:active {
            color: rgb(0, 159, 118);
            text-decoration: underline;
        }

        p.beatmaps.title {
            margin-top: 2px;
            margin-bottom: 2px;

            color: #FFF;
            font-size: 12px;
        }
    </style>
</head>

<body>
    <div id="info">
        <h1>The BeastSaber Mapping Awards</h1>
        <h4>AKA: The Beasties - By Mappers, for Mappers</h4>
        <p>
            The BeastSaber Mapping Awards, also called "The Beasties," are annual awards that seek to celebrate the best
            of the best of Beat Saber mapping across multiple categories. Maps that were released between December 1,
            2023 and November 30, 2024 are eligible for this year's nominations.
            <br><br>
            Using the form below, you can submit your favorite maps for consideration in the 2024 BeastSaber Mapping
            Awards. For information on the categories and criteria, please refer to the <a class="bio"
                href="https://bsaber.com/the-beastsaber-mapping-awards">BeastSaber Website</a>. Any changes from last
            year are also listed here. You can also view the current submission counts for each category at <a
                class="bio" href="#counts">the bottom of this page</a>.
            <!--<br><br>
            For more information, visit the <a class="bio" href="https://bsaber.com/the-beastsaber-mapping-awards">Beasties page on the BeastSaber Website</a>.
            <br><br>!-->
        </p>
    </div>
    <div id="form">
        <h2>2024 Map Submission Form</h2>
        <h3 style="color: red;">This is a demo form. Data submitted will not be saved.</h3>
        <form action="form/submitmap" method="post" id="nominationForm" style="display: none;">
            <label for="category">Category</label>
            <select id="category" name="category" onchange="onChange()" required></select><br><br>

            <label class="FORMbsr" for="bsrId">BSR Key (e.g. "3de68", "3bbb0", "39624")</label><br>
            <input class="FORMbsr" type="text" id="bsrId" name="bsrId" maxlength=5 minlength=5
                pattern="[0123456789abcdefABCDEF]{5}" onchange="onBSRInput()"><br><br>

            <label class="FORMname" id="nameLabel" for="name">Pack/Mapper Name or BeatSaver URL</label><br>
            <input class="FORMname" type="text" id="name" name="name" maxlength=100 minlength=3 pattern="[a-zA-Z0-9]+|[ _.\-]+" onchange="onMapperInput()"><br><br>

            <label class="FORMOSTName" for="OSTname">OST Map</label><br>
            <select class="FORMOSTName" id="OSTname" name="OSTname">
                <option value="" style="display: none;"></option>
            </select>


            <label class="FORMchardiff" for="charecteristic">Characteristic</label><br>
            <select class="FORMchardiff" id="charecteristic" name="charecteristic">
                <option value="Standard">Standard</option>
                <option value="OneSaber">One Saber</option>
                <option value="NoArrows">No Arrows</option>
                <option value="360Degree">360 Degree</option>
                <option value="90Degree">90 Degree</option>
                <option value="Lawless">Lawless</option>
                <option value="Lightshow">Lightshow</option>
                <option value="Other" style="display: none;">All</option>
            </select>

            <label class="FORMchardiff" for="difficulty">Difficulty</label><br>
            <select class="FORMchardiff" id="difficulty" name="difficulty">
                <option value="Easy">Easy</option>
                <option value="Normal">Normal</option>
                <option value="Hard">Hard</option>
                <option value="Expert">Expert</option>
                <option value="ExpertPlus">Expert+</option>
                <option value="Other" style="display: none;">All</option>
            </select>

            <input type="submit" value="Submit" formenctype="application/x-www-form-urlencoded">
        </form>
        <div class="beatmaps-container" id="beatmaps-container">
            <div id="TEMP_PLACEHOLDER"></div>
        </div>
        <p id="username">Not currently logged in. <br><br><a href="/api/auth/beatleader"><img src="/cdn/loginbl.png"
                    width="200px" /></a></p>
    </div>
    <div id="countsContainer">
        <h1>Submission Counts</h1>
        <span>
            <p class="countLabel">Total Submissions</p>
            <p class="count" id="totalCount">0</p>
        </span>
        <div id="counts">
            <span>
                <p class="countLabel">OST Map</p>
                <p class="count" id="ostCount">0</p>
            </span>
            <span>
                <p class="countLabel">Non-Standard Map</p>
                <p class="count" id="altCount">0</p>
            </span>
            <span>
                <p class="countLabel">Full Spread Map</p>
                <p class="count" id="fullspreadCount">0</p>
            </span>
            <span>
                <p class="countLabel">Lightshow</p>
                <p class="count" id="lightshowCount">0</p>
            </span>
            <span>
                <p class="countLabel">Modchart</p>
                <p class="count" id="modchartCount">0</p>
            </span>
            <span>
                <p class="countLabel">Art Map</p>
                <p class="count" id="artmapCount">0</p>
            </span>
            <span>
                <p class="countLabel">Ranked Map</p>
                <p class="count" id="rankedmapCount">0</p>
            </span>
            <span>
                <p class="countLabel">Balanced Map</p>
                <p class="count" id="balancedCount">0</p>
            </span>
            <span>
                <p class="countLabel">Tech Map</p>
                <p class="count" id="techCount">0</p>
            </span>
            <span>
                <p class="countLabel">Speed Map</p>
                <p class="count" id="speedCount">0</p>
            </span>
            <span>
                <p class="countLabel">Dance Map</p>
                <p class="count" id="danceCount">0</p>
            </span>
            <span>
                <p class="countLabel">Fitness Map</p>
                <p class="count" id="fitnessCount">0</p>
            </span>
            <span>
                <p class="countLabel">Challenge Map</p>
                <p class="count" id="challengeCount">0</p>
            </span>
            <span>
                <p class="countLabel">Acc Map</p>
                <p class="count" id="accCount">0</p>
            </span>
            <span>
                <p class="countLabel">Poodle Map</p>
                <p class="count" id="poodleCount">0</p>
            </span>
            <span>
                <p class="countLabel">Gimmick Map</p>
                <p class="count" id="gimmickCount">0</p>
            </span>
            <span>
                <p class="countLabel">Mapper of the Year</p>
                <p class="count" id="mapperotyCount">0</p>
            </span>
            <span>
                <p class="countLabel">Lighter of the Year</p>
                <p class="count" id="lighterotyCount">0</p>
            </span>
            <span>
                <p class="countLabel">Rookie Mapper of the Year</p>
                <p class="count" id="rookiemapperotyCount">0</p>
            </span>
            <span>
                <p class="countLabel">Rookie Lighter of the Year</p>
                <p class="count" id="rookielighterotyCount">0</p>
            </span>
            <span>
                <p class="countLabel">Pack of the Year</p>
                <p class="count" id="packotyCount">0</p>
            </span>
            <span>
                <p class="countLabel">Map of the Year</p>
                <p class="count" id="mapotyCount">0</p>
            </span>
        </div>
    </div>
    <footer>
        <p class="footer">Created by <a class="footer" href="https://saeraphinx.dev">Saeraphinx</a></p>
    </footer>
    <script>
        // #region Beginning
        window.onload = async function checkSignedIn() {
            const auth = await fetch('/api/auth', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            });
            if (auth.status !== 200) {
                //commit this line out when working on the page
                //window.location.href = '/api/auth/beatleader';
            } else {
                const data = await auth.json();
                const element = document.getElementById('username');
                document.getElementById('nominationForm').style.display = null;
                element.innerHTML = `Logged in as <a class="username" href="https://beatleader.xyz/u/${data.userId}">${data.username}</a> • <a class="username" href="api/auth/logout">Log Out</a>`;
            }
        };

        /* eslint-disable @typescript-eslint/no-unused-vars */
        /* eslint-disable quotes */

        const NominationCategory = {
            MapOfTheYear: [`OTY-Map`, "Map of the Year"],
            MapperOfTheYear: [`OTY-Mapper`, "Mapper of the Year"],
            LighterOfTheYear: [`OTY-Lighter`, "Lighter of the Year"],
            RookieMapperOfTheYear: [`OTY-RookieMapper`, "Rookie Mapper of the Year"],
            RookieLighterOfTheYear: [`OTY-RookieLighter`, "Rookie Lighter of the Year"],
            PackOfTheYear: [`OTY-Pack`, "Pack of the Year"],
            OST: [`Gen-OST`, `OST`],
            FullSpreadMap: [`Gen-FullSpread`, "Full Spread"],
            AlternativeMap: [`Gen-Alternative`, "Non-Standard"],
            RankedMap: [`Ranked-RankedMap`, "Ranked Map"],
            Lightshow: [`Mods-Lightshow`, "Lightshow"],
            Modchart: [`Mods-Modchart`, "Modchart"],
            ArtMap: [`Mods-ArtMap`, "Art Map"],
            BalancedMap: [`Style-Balanced`, "Balanced"],
            TechMap: [`Style-Tech`, "Tech"],
            SpeedMap: [`Style-Speed`, "Speed"],
            DanceMap: [`Style-Dance`, "Dance"],
            FitnessMap: [`Style-Fitness`, "Fitness"],
            ChallengeMap: [`Style-Challenge`, "Challenge"],
            AccMap: [`Style-Acc`, "Acc"],
            PoodleMap: [`Style-Poodle`, "Poodle"],
            GimmickMap: [`Style-Gimmick`, "Gimmick"],
        };

        const OSTMaps = [
            "OST 7 | F.O.O.L - Damage",
            "OST 7 | Camellia - Lustre",
            "OST 7 | Teminite x Boom Kitty - The Master",
            "OST 7 | Lindsey Stirling - Untamed",
            "OST 7 | Nitro Fun - World Wide Web",
            "Hip Hop Mixtape | 2Pac - All Eyez On Me (featuring Big Syke)",
            "Hip Hop Mixtape | Nicki Minaj - Anaconda",
            "Hip Hop Mixtape | Snoop Dogg - Gin and Juice",
            "Hip Hop Mixtape | Eminem - Godzilla (feat. Juice WRLD)",
            "Hip Hop Mixtape | Outkast - Hey Ya!",
            "Hip Hop Mixtape | The Notorious B.I.G. - Hypnotize",
            "Hip Hop Mixtape | Dr Dre - Nuthin’ But A “G” Thang",
            "Hip Hop Mixtape | Grandmaster Flash & The Furious Five - The Message",
            "Hip Hop Mixtape | Pop Smoke - The Woo (feat. 50 Cent, Roddy Ricch)",
            "Daft Punk Pack | Daft Punk - Around The World",
            "Daft Punk Pack | Daft Punk - Around The World / Harder Better Faster Stronger (Live 2007)",
            "Daft Punk Pack | Daft Punk - Da Funk / Daftendirekt (Live 2007)",
            "Daft Punk Pack | Daft Punk - Get Lucky (feat. Pharrell Williams and Nile Rodgers)",
            "Daft Punk Pack | Daft Punk - Harder, Better, Faster, Stronger",
            "Daft Punk Pack | Daft Punk - Lose Yourself to Dance (feat. Pharrell Williams)",
            "Daft Punk Pack | Daft Punk - One More Time",
            "Daft Punk Pack | Daft Punk - Technologic",
            "Daft Punk Pack | Daft Punk - The Prime Time of Your Life (Live 2007)",
            "Daft Punk Pack | Daft Punk - Veridis Quo",
            "OST 6 | Boom Kitty - Cathedral",
            "OST 6 | Lindsey Stirling - Heavy Weight",
            "OST 6 | Far Out - Lift Off",
            "OST 6 | DragonForce - Power of the Saber Blade",
            "OST 6 | Camellia - Tempo-Katana",
        ];

        // Get the form element
        const selectTag = document.getElementById('category');

        // Generate the category options
        for (const category in NominationCategory) {
            const option = document.createElement('option');
            option.value = NominationCategory[category][0];
            option.innerHTML = NominationCategory[category][1];

            selectTag.appendChild(option);
        }

        const selectOSTMap = document.getElementById('OSTname');

        OSTMaps.forEach(OSTMap => {
            const option = document.createElement('option');
            option.value = OSTMap;
            option.innerHTML = OSTMap;

            selectOSTMap.appendChild(option);
        });
        // #endregion

        function onChange() {
            const category = document.getElementById('category').value;
            const nameLabel = document.getElementById('nameLabel');
            //const charecteristic = document.getElementById('charecteristic');
            //const difficulty = document.getElementById('difficulty');
            document.getElementById("beatmaps-container").innerHTML = "";
            if (category == "Gen-FullSpread") {
                toggleCharDiff(false, false, false);
            } else if (category == "OTY-Mapper" || category == "OTY-RookieMapper") {
                toggleCharDiff(false, true, false);
                nameLabel.innerHTML = "Mapper Name or BeatSaver URL";
            } else if (category == "OTY-RookieLighter" || category == "OTY-Lighter") {
                toggleCharDiff(false, true, false);
                nameLabel.innerHTML = "Lighter Name or BeatSaver URL";
            } else if (category == "OTY-Pack") {
                toggleCharDiff(false, true, false);
                nameLabel.innerHTML = "Pack Name";
            } else if (category == "Gen-OST") {
                toggleCharDiff(true, true, true);
            } else {
                toggleCharDiff(true, false, false);
            }
        }
        onChange();

        function toggleCharDiff(showDiffChar, showName, showOSTName) {
            const charecteristic = document.getElementById('charecteristic');
            const difficulty = document.getElementById('difficulty');
            const bsrId = document.getElementById('bsrId');
            const name = document.getElementById('name');
            const OSTname = document.getElementById('OSTname');
            let formCharDiff = document.getElementsByClassName('FORMchardiff');
            if (showDiffChar) {
                for (let i = 0; i < formCharDiff.length; i++) {
                    formCharDiff[i].style.display = 'block';
                }
                charecteristic.disabled = false;
                charecteristic.value = "Standard";
                difficulty.disabled = false;
                difficulty.value = "ExpertPlus";
            } else {
                for (let i = 0; i < formCharDiff.length; i++) {
                    formCharDiff[i].style.display = 'none';
                }
                charecteristic.value = "Other";
                charecteristic.disabled = true;
                difficulty.value = "Other";
                difficulty.disabled = true;
            }

            let formName = document.getElementsByClassName('FORMname');
            let formBSR = document.getElementsByClassName('FORMbsr');
            if (showName) {
                for (let i = 0; i < formName.length; i++) {
                    formName[i].style.display = 'block';
                }
                for (let i = 0; i < formBSR.length; i++) {
                    formBSR[i].style.display = 'none';
                }
                bsrId.value = "";
                name.value = "";
            } else {
                for (let i = 0; i < formName.length; i++) {
                    formName[i].style.display = 'none';
                }
                for (let i = 0; i < formBSR.length; i++) {
                    formBSR[i].style.display = 'block';
                }
                bsrId.value = "";
                name.value = "";
            }

            let formOSTName = document.getElementsByClassName('FORMOSTName');

            if (showOSTName) {
                for (let i = 0; i < formOSTName.length; i++) {
                    formOSTName[i].style.display = 'block';
                }
                for (let i = 0; i < formBSR.length; i++) {
                    formBSR[i].style.display = 'none';
                }
                for (let i = 0; i < formName.length; i++) {
                    formName[i].style.display = 'none';
                }
                bsrId.value = "";
                name.value = "";
            } else {
                for (let i = 0; i < formOSTName.length; i++) {
                    formOSTName[i].style.display = 'none';
                }
                OSTname.value = "";
            }
        }

        function updateCounts() {
            fetch('/api/counts', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json',
                }
            }).then(response => response.json())
                .then(data => {
                    document.getElementById('totalCount').innerHTML = data.Total;
                    document.getElementById('mapotyCount').innerHTML = data.MapOfTheYear;
                    document.getElementById('mapperotyCount').innerHTML = data.MapperOfTheYear;
                    document.getElementById('lighterotyCount').innerHTML = data.LighterOfTheYear;
                    document.getElementById('rookiemapperotyCount').innerHTML = data.RookieMapperOfTheYear;
                    document.getElementById('rookielighterotyCount').innerHTML = data.RookieLighterOfTheYear;
                    document.getElementById('packotyCount').innerHTML = data.PackOfTheYear;
                    document.getElementById('ostCount').innerHTML = data.OSTMap;
                    document.getElementById('altCount').innerHTML = data.AlternativeMap;
                    document.getElementById('fullspreadCount').innerHTML = data.FullSpreadMap;
                    document.getElementById('lightshowCount').innerHTML = data.Lightshow;
                    document.getElementById('modchartCount').innerHTML = data.Modchart;
                    document.getElementById('artmapCount').innerHTML = data.ArtMap;
                    document.getElementById('rankedmapCount').innerHTML = data.RankedMap;
                    document.getElementById('balancedCount').innerHTML = data.BalancedMap;
                    document.getElementById('techCount').innerHTML = data.TechMap;
                    document.getElementById('speedCount').innerHTML = data.SpeedMap;
                    document.getElementById('danceCount').innerHTML = data.DanceMap;
                    document.getElementById('fitnessCount').innerHTML = data.FitnessMap;
                    document.getElementById('challengeCount').innerHTML = data.ChallengeMap;
                    document.getElementById('accCount').innerHTML = data.AccMap;
                    document.getElementById('poodleCount').innerHTML = data.PoodleMap;
                    document.getElementById('gimmickCount').innerHTML = data.GimmickMap;
                });
        }
        setInterval(updateCounts, 60000);
        updateCounts();

        // #region Beatmaps
        function onBSRInput() {
            const bsrId = document.getElementById('bsrId').value;
            let container = document.getElementById("beatmaps-container");
            container.innerHTML = "";
            if (bsrId.length == 5) {
                fetch('https://api.beatsaver.com/maps/id/' + bsrId).then(response => {
                    if (response.status == 200) {
                        response.json().then(data => {
                            createBeatmap(data);
                        });
                    } else {
                        let currMapDiv = document.createElement("div");
                        currMapDiv.classList.add("beatmaps");
                        currMapDiv.classList.add("beatmap");
                        currMapDiv.style = "align-items: center; justify-content: center; text-align: center;";
                        currMapDiv.innerHTML = "No map found with that BSR key.";
                        container.appendChild(currMapDiv);
                    }
                });
            }
        }

        function createBeatmap(bsapi) {
            // setup div
            let currMapDiv = document.createElement("div");
            currMapDiv.classList.add("beatmaps");
            currMapDiv.classList.add("beatmap");
            //image
            let imageDiv = document.createElement("div");
            imageDiv.classList.add("beatmaps");
            imageDiv.classList.add("image");

            let coverImg = document.createElement("img");
            coverImg.src = bsapi.versions[0].coverURL;
            coverImg.alt = bsapi.name;
            coverImg.width = "100";
            coverImg.height = "100";
            coverImg.classList.add("beatmaps");
            coverImg.classList.add("cover");

            currMapDiv.appendChild(imageDiv);
            imageDiv.appendChild(coverImg);

            // title
            let titleDiv = document.createElement("div");
            titleDiv.classList.add("beatmaps");
            titleDiv.classList.add("title");

            let titleLink = document.createElement("a");
            titleLink.href = "https://beatsaver.com/maps/" + bsapi.id;
            titleLink.innerHTML = bsapi.name;
            titleLink.target = "_blank";
            titleLink.classList.add("beatmaps");
            titleLink.classList.add("title");

            let titleInfo = document.createElement("p");
            titleInfo.innerHTML = `!bsr ${bsapi.id}<br>Mapper(s): ${bsapi.metadata.levelAuthorName}<br>Duration: ${Math.floor(bsapi.metadata.duration / 60)}:${Math.floor(bsapi.metadata.duration % 60)}`;
            titleInfo.classList.add("beatmaps");
            titleInfo.classList.add("title");

            let diffColors = document.createElement("div");
            diffColors.classList.add("beatmaps");
            diffColors.classList.add("difficulties");
            for (let map of bsapi.versions[0].diffs) {
                let bnsStuff = convertToBNS(map.characteristic, map.difficulty);
                let diff = document.createElement("div");
                diff.classList.add("beatmaps");
                diff.classList.add("difficulty");
                diff.style.backgroundColor = "#" + bnsStuff.color;
                let img = document.createElement("img");
                img.src = "/cdn/char/" + bnsStuff.charecteristic + ".svg";
                img.alt = map.characteristic + " " + map.difficulty;
                img.width = "20";
                img.height = "20";
                img.style = "padding-left: 4px;";
                img.title = map.characteristic + " " + map.difficulty;
                diff.appendChild(img);
                diffColors.appendChild(diff);
            }

            currMapDiv.appendChild(titleDiv);
            titleDiv.appendChild(titleLink);
            titleDiv.appendChild(titleInfo);
            titleDiv.appendChild(diffColors);

            let test = document.getElementById("beatmaps-container");
            let placeholder = document.getElementById("TEMP_PLACEHOLDER");
            test.insertBefore(currMapDiv, placeholder);
        }

        function convertToBNS(charecteristic, difficulty) {
            let returnObj = {
                charecteristic: "",
                color: "000"
            };
            switch (charecteristic) {
                case "Standard":
                    returnObj.charecteristic = "standard";
                    break;
                case "OneSaber":
                    returnObj.charecteristic = "one-saber";
                    break;
                case "NoArrows":
                    returnObj.charecteristic = "no-arrows";
                    break;
                case "360Degree":
                    returnObj.charecteristic = "360-degree";
                    break;
                case "90Degree":
                    returnObj.charecteristic = "90-degree";
                    break;
                case "Lawless":
                    returnObj.charecteristic = "lawless";
                    break;
                case "Lightshow":
                    returnObj.charecteristic = "lightshow";
                    break;
                case "Legacy":
                    returnObj.charecteristic = "legacy";
                    break;
            }
            switch (difficulty) {
                case "Easy":
                    returnObj.color = "008055";
                    break;
                case "Normal":
                    returnObj.color = "1268a1";
                    break;
                case "Hard":
                    returnObj.color = "bd5500";
                    break;
                case "Expert":
                    returnObj.color = "b52a1c";
                    break;
                case "ExpertPlus":
                    returnObj.color = "7646af";
                    break;
            }
            return returnObj;
        }

        function onMapperInput() {
            const mapper = document.getElementById('name').value;
            const category = document.getElementById('category').value;
            if (category == "OTY-Pack") {
                return;
            }
            let container = document.getElementById("beatmaps-container");
            container.innerHTML = "";
            let sendId = "";
            let isID = false;
            let cancel = false;
            if (mapper.length > 2) {
                if (mapper.includes("https://")) {
                    sendId = mapper.replace("https://beatsaver.com/profile/", "");
                    isID = true;
                } else if (mapper.match("[a-zA-Z]+")) {
                    sendId = mapper.replace(" ", "%20");
                    isID = false;
                } else {
                    sendId = mapper;
                    isID = true;
                }
                let req;
                if (isID) {
                    req = fetch('https://api.beatsaver.com/users/id/' + sendId);
                } else {
                    if (mapper.match(/[^a-zA-Z0-9:_/. \-]+/)) {
                        let currMapDiv = document.createElement("div");
                        currMapDiv.classList.add("beatmaps");
                        currMapDiv.classList.add("beatmap");
                        currMapDiv.style = "align-items: center; justify-content: center; text-align: center;";
                        currMapDiv.innerHTML = "No mapper found with that name.";
                        container.appendChild(currMapDiv);
                        return;
                    } else {
                        req = fetch('https://api.beatsaver.com/users/name/' + sendId);
                    }
                }
                req.then(response => {
                    if (response.status == 200) {
                        response.json().then(data => {
                            let currMapDiv = document.createElement("div");
                            currMapDiv.classList.add("beatmaps");
                            currMapDiv.classList.add("beatmap");
                            currMapDiv.style = "width: 300px"
                            //image
                            let imageDiv = document.createElement("div");
                            imageDiv.classList.add("beatmaps");
                            imageDiv.classList.add("image");

                            let coverImg = document.createElement("img");
                            coverImg.src = data.avatar;
                            coverImg.alt = data.name;
                            coverImg.title = data.name;
                            coverImg.width = "100";
                            coverImg.height = "100";
                            coverImg.classList.add("beatmaps");
                            coverImg.classList.add("cover");

                            currMapDiv.appendChild(imageDiv);
                            imageDiv.appendChild(coverImg);

                            // title
                            let titleDiv = document.createElement("div");
                            titleDiv.classList.add("beatmaps");
                            titleDiv.classList.add("title");
                            titleDiv.style = "text-align: center; margin: auto;";

                            let titleLink = document.createElement("a");
                            titleLink.href = "https://beatsaver.com/profile/" + data.id;
                            titleLink.innerHTML = data.name;
                            titleLink.target = "_blank";
                            titleLink.classList.add("beatmaps");
                            titleLink.classList.add("title");
                            titleLink.style = "font-size: 24px;";

                            currMapDiv.appendChild(titleDiv);
                            titleDiv.appendChild(titleLink);

                            let test = document.getElementById("beatmaps-container");
                            let placeholder = document.getElementById("TEMP_PLACEHOLDER");
                            test.insertBefore(currMapDiv, placeholder);
                            document.getElementById('name').value = "https://beatsaver.com/profile/" + data.id;
                        });
                    } else {
                        let currMapDiv = document.createElement("div");
                        currMapDiv.classList.add("beatmaps");
                        currMapDiv.classList.add("beatmap");
                        currMapDiv.style = "align-items: center; justify-content: center; text-align: center;";
                        currMapDiv.innerHTML = "No mapper found with that name.";
                        container.appendChild(currMapDiv);
                    }
                });
            }
        }
    </script>
</body>

</html>